function g(r){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}function f(r){const e=typeof r=="string"?new Date(r):r;return new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(e)}function y(r){const e=typeof r=="string"?new Date(r):r;return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}function w(r,e){const t=typeof r=="string"?new Date(r):r,s=typeof e=="string"?new Date(e):e,n=Math.abs(s-t);return Math.ceil(n/(1e3*60*60*24))+1}function T(r,e){let t;return function(...n){const a=()=>{clearTimeout(t),r(...n)};clearTimeout(t),t=setTimeout(a,e)}}function x(r){r.disabled=!0,r.classList.add("loading"),r.dataset.originalText=r.textContent,r.textContent="Memproses..."}function v(r){r.disabled=!1,r.classList.remove("loading"),r.textContent=r.dataset.originalText||r.textContent}function S(r,e="info"){const t=document.createElement("div");t.className=`notification notification-${e} fade-in`,t.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 24px;
        border-radius: 8px;
        z-index: 1000;
        max-width: 400px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    `,t.textContent=r,document.body.appendChild(t),setTimeout(()=>{t.classList.add("fade-out"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)},5e3)}function D(r,e="Konfirmasi"){return new Promise(t=>{const s=window.confirm(`${e}

${r}`);t(s)})}function b(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}function q(r,e){const t={};return e.forEach(s=>{(!r[s]||r[s].toString().trim()==="")&&(t[s]="Field ini wajib diisi")}),{isValid:Object.keys(t).length===0,errors:t}}async function P(r,e={}){try{const t=u(),s=await fetch(r,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":t,...e.headers},...e});if(!s.ok){let a={};try{a=await s.json()}catch{a.message=s.statusText||`HTTP error! status: ${s.status}`}const o=new Error(a.message||`HTTP error! status: ${s.status}`);throw o.status=s.status,o.data=a,o}const n=s.headers.get("content-type");return n&&n.includes("application/json")?await s.json():{success:!0}}catch(t){throw console.error("Request failed:",t),t}}function R(r,e,t=600){r.classList.add(e),setTimeout(()=>{r.classList.remove(e)},t)}function u(){var r;return((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""}function A(r,e,t=60){const n={data:e,expiry:new Date().getTime()+t*60*1e3};localStorage.setItem(r,JSON.stringify(n))}function I(r){const e=localStorage.getItem(r);if(!e)return null;try{const t=JSON.parse(e);return new Date().getTime()>t.expiry?(localStorage.removeItem(r),null):t.data}catch{return localStorage.removeItem(r),null}}const k=Object.freeze(Object.defineProperty({__proto__:null,animateElement:R,calculateDayDifference:w,confirmDialog:D,debounce:T,formatCurrency:g,formatDate:f,formatDateShort:y,getCSRFToken:u,getLocalStorageWithExpiry:I,hideButtonLoading:v,isValidEmail:b,makeRequest:P,setLocalStorageWithExpiry:A,showButtonLoading:x,showNotification:S,validateRequired:q},Symbol.toStringTag,{value:"Module"}));class i{constructor(e=""){this.baseURL=e,this.csrfToken=this.getCSRFToken()}getCSRFToken(){var e;return((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||""}getDefaultHeaders(){return{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.csrfToken,Accept:"application/json"}}async request(e,t={}){const s={headers:{...this.getDefaultHeaders(),...t.headers},...t};try{const n=await fetch(this.baseURL+e,s);if(!n.ok){let o={};try{o=await n.json()}catch{o.message=n.statusText||`HTTP error! status: ${n.status}`}const c=new Error(o.message||`HTTP error! status: ${n.status}`);throw c.status=n.status,c.data=o,c}const a=n.headers.get("content-type");return a&&a.includes("application/json")?await n.json():{success:!0}}catch(n){throw console.error("API request failed:",n),n.status||(n.message="Network error or server unavailable"),n}}async get(e,t={}){const s=new URLSearchParams(t).toString(),n=s?`${e}?${s}`:e;return this.request(n,{method:"GET"})}async post(e,t={}){return this.request(e,{method:"POST",body:JSON.stringify(t)})}async put(e,t={}){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t={}){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}async postForm(e,t){return this.request(e,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.csrfToken},body:t})}}class l extends i{async getAll(e={}){return this.get("/travel-requests",e)}async getById(e){return this.get(`/travel-requests/${e}`)}async create(e){return this.post("/travel-requests",e)}async update(e,t){return this.patch(`/travel-requests/${e}`,t)}async delete(e){return this.delete(`/travel-requests/${e}`)}async submit(e){return this.post(`/travel-requests/${e}/submit`)}async exportPDF(e){try{const t=await fetch(`/travel-requests/${e}/export/pdf`,{headers:this.getDefaultHeaders()});if(!t.ok)throw new Error("Failed to generate PDF");return t.blob()}catch(t){throw console.error("PDF export failed:",t),t}}async calculateBudget(e){return this.post("/travel-requests/calculate-budget",e)}}class d extends i{async getPendingApprovals(){return this.get("/approval/pimpinan")}async getApprovalDetail(e){return this.get(`/approval/pimpinan/${e}/show`)}async approve(e,t=""){return this.post(`/approval/pimpinan/${e}/approve`,{comments:t})}async reject(e,t,s=""){return this.post(`/approval/pimpinan/${e}/reject`,{reason:t,comments:s})}async requestRevision(e,t){return this.post(`/approval/pimpinan/${e}/revision`,{comments:t})}}class p extends i{async getAll(){return this.get("/users")}async create(e){return this.post("/users",e)}async toggleStatus(e){return this.patch(`/users/${e}/toggle-status`)}async export(){try{const e=await fetch("/users/export",{headers:this.getDefaultHeaders()});if(!e.ok)throw new Error("Failed to export users");return e.blob()}catch(e){throw console.error("User export failed:",e),e}}}class h extends i{async getStats(){return this.get("/dashboard/stats")}async getChartData(e){return this.get(`/dashboard/chart/${e}`)}async getRecentActivities(){return this.get("/dashboard/recent-activities")}}class m extends i{async getMyDocuments(){return this.get("/dokumen/saya")}async getAllDocuments(){return this.get("/dokumen/semua")}async upload(e,t){const s=new FormData;return s.append("travel_request_id",e),t.forEach((n,a)=>{s.append(`documents[${a}]`,n)}),this.postForm("/documents/upload",s)}async delete(e){return this.delete(`/documents/${e}`)}}const $=new l,F=new d,j=new p,E=new h,C=new m,L=Object.freeze(Object.defineProperty({__proto__:null,ApprovalAPI:d,DashboardAPI:h,DocumentAPI:m,TravelRequestAPI:l,UserAPI:p,approvalAPI:F,dashboardAPI:E,documentAPI:C,travelRequestAPI:$,userAPI:j},Symbol.toStringTag,{value:"Module"}));export{L as a,E as d,g as f,k as h};
